# Emoji-15: predicci√≥n de emojis, ejemplo de clasificaci√≥n regional

##
Predicci√≥n emojis que podr√≠an estar asociados a un mensaje


::: {style="font-size: 16pt;"}
- Tomamos mensajes georeferenciados enero-febrero 2020.
- Seleccionamos los emoji objetivos entre los m√°s populares en espa√±ol: ü•∫, ‚ù§, üëå, üëè, üíî, üòÑ, üòä, üòå, üòç, üòí, üòò, üò°, üò¢, üò≠, ü§î.
- Para cada regi√≥n seleccionamos mensajes con solo uno de estos emoji.
- El emoji en cuesti√≥n se reemplaza por la cadena `_emo` y se usa como etiqueta.
- Partici√≥n 50-50 por cada regi√≥n, se reporta micro recall.
- Usamos fastText supevisado con cada uno de los modelos regionales como preentrenados -- all vs all.
:::

## 

::: {.absolute left=-50 style='font-size: 14pt;'}
| emoji | AR | BR | CA | CL | CO | CR | CU | DO | EC | ES | FR | GB | GT | HN | MX | NI | PA | PE | PY | SV | US | UY | VE |
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
| ü•∫ | 3749 | 275 | 158 | 1263 | 4760 | 425 | 26 | 458 | 745 | 2640 | 53 | 95 | 666 | 708 | 10160 | 736 | 827 | 739 | 684 | 278 | 2536 | 446 | 359 |
| ‚ù§ | 18454 | 1775 | 124 | 2911 | 6237 | 821 | 41 | 348 | 1123 | 8394 | 153 | 255 | 653 | 609 | 9508 | 491 | 880 | 968 | 1800 | 219 | 3216 | 1478 | 784 |
| üëå | 2114 | 92 | 34 | 1016 | 1455 | 242 | 20 | 167 | 253 | 1825 | 41 | 58 | 376 | 157 | 2754 | 159 | 313 | 160 | 666 | 124 | 597 | 190 | 71 |
| üëè | 6785 | 433 | 80 | 2995 | 2486 | 159 | 33 | 369 | 886 | 7061 | 64 | 105 | 197 | 159 | 4175 | 52 | 388 | 577 | 761 | 222 | 1281 | 1248 | 530 |
| üíî | 4278 | 100 | 28 | 390 | 1407 | 161 | 7 | 123 | 200 | 1164 | 26 | 37 | 134 | 91 | 1438 | 105 | 260 | 115 | 428 | 31 | 667 | 283 | 142 |
| üòÑ | 798 | 26 | 8 | 301 | 300 | 42 | 3 | 56 | 83 | 776 | 4 | 18 | 48 | 48 | 549 | 17 | 58 | 115 | 92 | 53 | 192 | 85 | 120 |
| üòä | 3609 | 105 | 35 | 1803 | 1475 | 171 | 32 | 175 | 364 | 3827 | 74 | 56 | 257 | 129 | 3395 | 115 | 236 | 817 | 369 | 192 | 829 | 377 | 293 |
| üòå | 1184 | 70 | 30 | 827 | 986 | 132 | 44 | 280 | 238 | 1017 | 23 | 23 | 123 | 163 | 2011 | 151 | 293 | 248 | 377 | 78 | 608 | 167 | 110 |
| üòç | 15999 | 932 | 111 | 2190 | 6824 | 510 | 28 | 509 | 837 | 8000 | 107 | 136 | 491 | 514 | 8711 | 341 | 1010 | 999 | 1996 | 268 | 2232 | 1194 | 686 |
| üòí | 3081 | 89 | 24 | 920 | 1718 | 155 | 50 | 316 | 291 | 780 | 18 | 22 | 163 | 124 | 2185 | 175 | 322 | 213 | 259 | 127 | 738 | 359 | 236 |
| üòò | 5935 | 211 | 70 | 1764 | 1482 | 98 | 29 | 119 | 347 | 10785 | 203 | 99 | 171 | 72 | 4290 | 63 | 136 | 374 | 190 | 181 | 1808 | 719 | 493 |
| üò° | 2777 | 136 | 60 | 1098 | 1412 | 150 | 5 | 110 | 291 | 1320 | 12 | 25 | 158 | 52 | 2428 | 59 | 155 | 227 | 250 | 90 | 769 | 301 | 252 |
| üò¢ | 2144 | 89 | 38 | 699 | 1039 | 153 | 8 | 102 | 296 | 1507 | 31 | 39 | 151 | 129 | 2646 | 131 | 204 | 271 | 239 | 69 | 781 | 227 | 135 |
| üò≠ | 13873 | 436 | 125 | 1967 | 4461 | 581 | 25 | 604 | 787 | 3935 | 157 | 135 | 388 | 364 | 6752 | 321 | 1057 | 979 | 1832 | 200 | 2799 | 939 | 530 |
| ü§î | 6751 | 275 | 154 | 2756 | 4173 | 440 | 47 | 614 | 771 | 4781 | 99 | 111 | 421 | 339 | 7380 | 211 | 741 | 1135 | 937 | 384 | 1941 | 951 | 734 |
:::

## Resultados experimentales
:::: {.columns width="120%"}
::: {.column width="50%" style='font-size: 14pt;'}
| cc |	minrecall	| maxrecall |	localrank |	top5 |
|---|---|---|---|---|
| AR |	0.4777 |	0.49   |	3	| UY,PY,AR,PE,CO  |
| BR |	0.4611 |	0.4879 |	1	| BR,ALL,DO,PY,CR  |
| CA |	0.2934 |	0.3533 |	18	| CL,ALL,CO,MX,US  |
| CL |	0.4257 |	0.4494 |	1	| CL,US,MX,AR,ES  |
| CO |	0.4247 |	0.4365 |	2	| US,CO,VE,EC,GT  |
| CR |	0.3689 |	0.388  |	9	| US,VE,ALL,MX,CO  |
| DO |	0.3383 |	0.3813 |	13	| US,CO,VE,CL,ALL  |
| EC |	0.3797 |	0.4138 |	9	| MX,US,CL,ALL,CO  |
| ES |	0.4754 |	0.4855 |	1	| ES,AR,MX,US,VE  |
| FR |	0.4187 |	0.4424 |	4	| ALL,GT,EC,FR,PA  |
:::

::: {.column width="50%" style='font-size: 14pt;'}
| cc |	minrecall	| maxrecall |	localrank |	top5 |
|---|---|---|---|---|
| GB |	0.3467 |	0.3756 |	23	| ALL,AR,ES,VE,MX  |
| GT |	0.3489 |	0.3882 |	13	| MX,US,ALL,CO,ES  |
| HN |	0.3354 |	0.3671 |	18	| PE,EC,BR,CR,UY  |
| MX |	0.4233 |	0.4335 |	1	| MX,GT,CR,US,CO  |
| NI |	0.3372 |	0.3718 |	18	| VE,CO,CL,MX,US  |
| PA |	0.3658 |	0.3927 |	10	| US,CL,VE,CO,PE  |
| PE |	0.3799 |	0.4196 |	9	| MX,ALL,US,AR,CO  |
| PY |	0.4244 |	0.4417 |	1	| PY,US,BR,PE,UY  |
| SV |	0.3226 |	0.3954 |	18	| US,CO,MX,CL,VE  |
| US |	0.4041 |	0.4244 |	1	| US,MX,CO,ES,CL  |
| UY |	0.4351 |	0.4572 |	1	| UY,US,CO,CL,VE  |
| VE |	0.3848 |	0.4338 |	4	| MX,CO,ES,VE,US  |
:::

::::

## Cuantiles de la variable _localrank_
| quantile | rank |
|---|---|
|0.00 | 1.0 |
|0.25 | 1.0 |
|0.50 | 6.5 |
|0.75 | 13  |
|1.00 | 23  |

## ¬øQu√© tan bueno es cada modelo?

::: {style='font-size: 20pt;'}
| cc  | freq |
|-----|----|
|  US | 17 |
|  CO | 15 |
|  MX | 13 |
|  VE | 10 |
| ALL | 9 |
|  CL | 9 |
|  ES | 6 |
|  AR | 5 |
|...  | ...|
: Apariciones en el top-5
:::


## average rank de modelos

:::: {.columns}

::: {.column width="50%" style='font-size: 20pt;'} 
| model | voc-size | avg. model rank |
| :---: | -------: | --------------: |
| US | 292,465 | 4.23 |
| CO | 324,635 | 6.05 |
| MX | 438,136 | 6.27 |
| CL | 282,737 | 6.91 |
| VE | 271,924 | 7.0 |
| ALL | 1,696,232 | 8.45 |
| PE | 178,113 | 8.64 |
| UY | 200,032 | 8.73 |
| EC | 147,560 | 8.95 |
| AR | 673,424 | 9.41 |
| ES | 571,196 | 10.95 |
| PY | 124,162 | 11.14 |
:::

::: {.column width="50%" style='font-size: 20pt;'}
| model | voc-size | avg. model rank |
| :---: | -------: | --------------: |
| BR | 127,205 | 11.27 |
| CR | 103,086 | 12.5 |
| PA | 111,635 | 13.36 |
| GT | 95,252 | 13.64 |
| DO | 108,655 | 14.91 |
| GB | 82,418 | 18.0 |
| NI | 68,605 | 18.18 |
| FR | 69,843 | 18.91 |
| CA | 63,161 | 19.0 |
| SV | 73,833 | 19.14 |
| HN | 60,580 | 20.36 |
:::
::::